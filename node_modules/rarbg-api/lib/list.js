'use strict';

var utils = require('./utils');
var constants = require('./constants');
var request = utils.request;
var proceedExtraParams = utils.proceedExtraParams;

module.exports = function list(options) {
  var extraParams = proceedExtraParams(options);
  return request(constants.BASE_URL, Object.assign({}, {
    mode: 'list'
  }, extraParams)).then(function (res) {
    if (res.body.error) {
      return Promise.reject(res.body);
    } else {
      return res.body.torrent_results;
    }
  });
};